@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix shr: <http://www.w3.org/ns/shacl/repairs#> .
@prefix : <http://org.shacl.repairs.tests/> .
@prefix fibo-fnd-agr-ctr: <https://spec.edmcouncil.org/fibo/ontology/FND/Agreements/Contracts/> .

:FunctionalContractStatusStrategy
    a shr:RepairStrategy;
    shr:hasPreference [
        sh:path :hasContractStatus;
        shr:action shr:delete;
        shr:preferenceType shr:read-only;
        shr:values (
            :statusPending :statusFulfilled :statusViolated
        )
    ];
    shr:hasPreference [
        sh:path :hasContractStatus;
        shr:action shr:add;
        shr:preferenceType shr:change;
        shr:values (
            :statusPending
        )
    ] .

:FunctionalStateStrategy
    a shr:RepairStrategy;
    shr:hasPreference [
        sh:path :hasState;
        shr:action shr:delete;
        shr:preferenceType shr:read-only;
        shr:values (
            :PendingState :FulfilledState :ViolatedState
        )
    ];
    shr:hasPreference [
        sh:path :hasState;
        shr:action shr:add;
        shr:preferenceType shr:change;
        shr:values (
            :PendingState
        )
    ] .

:ViolatedContractStrategy
    a shr:RepairStrategy;
    shr:hasConstraint [
        sh:path :hasObligations;
        shr:action shr:delete
    ];
    shr:hasConstraint [
        sh:path :hasState;
        shr:action shr:delete;
        shr:values (
            :ViolatedState
        )
    ] .

:FunctionalEndDateStrategy
    a shr:RepairStrategy;
    shr:hasConstraint [
        shr:condition fibo-fnd-agr-ctr:Contract;
        sh:path :hasEndDate;
        shr:action shr:delete
    ];
    shr:hasPreference [
        sh:path :hasEndDate;
        shr:action shr:delete;
        shr:preferenceType shr:read-only;
        shr:function shr:maxValue
    ] .